(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[22],{111:function(e,a,i){e.exports={profileWrapper:"userprofile_profileWrapper__1WXjP",profileContainer:"userprofile_profileContainer__EPef_",profileHeader:"userprofile_profileHeader__3mAb-",title:"userprofile_title__2t5FK",emailContainer:"userprofile_emailContainer__3wMxr",emailInfo:"userprofile_emailInfo__2kWbw",profileInfoWrapper:"userprofile_profileInfoWrapper__1sZJg",orderHistoryWrapper:"userprofile_orderHistoryWrapper__3qQDg",userInfo:"userprofile_userInfo__5UmV_",orderHistoryTitle:"userprofile_orderHistoryTitle__3PRHN",userInfoTitle:"userprofile_userInfoTitle__3tNNq",orderTitle:"userprofile_orderTitle__3SGJJ",displayName:"userprofile_displayName__1fBdO",isEmailVerfiedContainer:"userprofile_isEmailVerfiedContainer__2qTtM",emailVerficationInfo:"userprofile_emailVerficationInfo__2SqZj",emailNotVerfied:"userprofile_emailNotVerfied__2-aE8",emailVerfied:"userprofile_emailVerfied__3QfEI",emailActions:"userprofile_emailActions__1TzbT",changeActionDiv:"userprofile_changeActionDiv__1yRRW",emailActionBtn:"userprofile_emailActionBtn__3FSj8"}},126:function(e,a,i){"use strict";i.r(a);var r=i(6),t=i(9),s=i(5),n=i(0),o=i(13),c=i(111),l=i.n(c),d=i(8),f=i(1);a.default=function(){var e=Object(n.useState)({}),a=Object(s.a)(e,2),i=a[0],c=a[1],m=Object(n.useContext)(o.b),p=m.token,u=Object(n.useState)(!1),j=Object(s.a)(u,2),h=j[0],_=j[1];console.log("emailVerificationStatus",h);var b=Object(n.useState)(""),O=Object(s.a)(b,2),x=O[0];O[1];console.log("VerficationStatusMessage",x);var N=Object(n.useState)([]),g=Object(s.a)(N,2),v=g[0],y=g[1];Object(n.useEffect)((function(){var e=function(){var e=Object(t.a)(Object(r.a)().mark((function e(a){var i,t,s,n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(a);case 2:if((i=e.sent).ok){e.next=5;break}throw new Error("Something went wrong while getting the user data!");case 5:return e.next=7,i.json();case 7:for(n in t=e.sent,s=[],t)s.push({id:n,email:t[n].email,firstName:t[n].firstName,lastName:t[n].lastName,emailVerified:t[n].emailVerified});y(s);case 11:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();e(" https://react-http-products-default-rtdb.firebaseio.com/users.json")}),[]),console.log("loaded users from real time database",v);Object(n.useEffect)((function(){var e=function(){var e=Object(t.a)(Object(r.a)().mark((function e(){var a,i,t;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://identitytoolkit.googleapis.com/v1/accounts:lookup?key=AIzaSyDNDXcfx6jpm5Y_121TikxsU7-Yx2ZrmeQ",{method:"POST",body:JSON.stringify({idToken:p}),headers:{"Content-Type":"application/json"}});case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Something went wrong while getting the user data!");case 5:return e.next=7,a.json();case 7:(i=e.sent)?(c(i.users[0]),m.setUserInfo(i.users[0]),localStorage.setItem("userData",JSON.stringify(i.users[0])),localStorage.setItem("emailVerified",i.users[0].emailVerified),_(null===i||void 0===i||null===(t=i.users[0])||void 0===t?void 0:t.emailVerified)):i||console.log("No data Found");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var V=function(){var e=Object(t.a)(Object(r.a)().mark((function e(){var a,i;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://identitytoolkit.googleapis.com/v1/accounts:sendOobCode?key=AIzaSyDNDXcfx6jpm5Y_121TikxsU7-Yx2ZrmeQ",{method:"POST",body:JSON.stringify({requestType:"VERIFY_EMAIL",idToken:p}),headers:{"Content-Type":"application/json"}});case 2:if(a=e.sent,console.log("Email Verfication Response",a),a.ok){e.next=6;break}throw new Error("Something went wrong while sending the email Verification! Plaease try again later");case 6:return e.next=8,a.json();case 8:i=e.sent,console.log("Email Verfication Data",i);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return console.log("userData",i),Object(f.jsx)("section",{className:l.a.profileWrapper,children:Object(f.jsxs)("div",{className:l.a.profileContainer,children:[Object(f.jsxs)("div",{className:l.a.profileHeader,children:[Object(f.jsx)("h1",{className:l.a.title,children:"My Account"}),Object(f.jsx)("div",{className:l.a.emailContainer,children:Object(f.jsx)("div",{className:l.a.emailInfo,children:Object(f.jsx)("p",{className:l.a.email,children:i.email})})})]}),Object(f.jsxs)("div",{className:l.a.profileInfoWrapper,children:[Object(f.jsxs)("div",{className:l.a.orderHistoryWrapper,children:[Object(f.jsx)("h2",{className:l.a.orderHistoryTitle,children:"Order History"}),Object(f.jsx)("p",{className:l.a.orderTitle,children:"You have not placed any orders yet!"})]}),Object(f.jsxs)("div",{className:l.a.userInfo,children:[Object(f.jsx)("h2",{className:l.a.userInfoTitle,children:"Account Details"}),Object(f.jsxs)("p",{className:l.a.displayName,children:[" ",i.displayName]}),Object(f.jsx)("div",{className:l.a.isEmailVerfiedContainer,children:Object(f.jsxs)("div",{className:l.a.emailVerficationInfo,children:[Object(f.jsx)("p",{className:l.a.emailTitle,children:"Email Verfication:"}),!h&&Object(f.jsx)("p",{className:l.a.emailNotVerfied,children:"Not Verfied"}),h&&Object(f.jsx)("p",{className:l.a.emailVerfied,children:"Verfied"})]})}),Object(f.jsxs)("div",{className:l.a.emailActions,children:[!h&&Object(f.jsx)("div",{className:l.a.changeActionDiv,children:Object(f.jsx)(d.Link,{onClick:V,to:"/verifyEmail",className:l.a.emailActionBtn,children:"Verify Email"})}),Object(f.jsx)("div",{className:l.a.changeActionDiv,children:Object(f.jsx)(d.Link,{to:"/changeEmail",className:l.a.emailActionBtn,children:"Change Email"})}),Object(f.jsx)("div",{className:l.a.changeActionDiv,children:Object(f.jsx)(d.Link,{to:"/changePassword",className:l.a.emailActionBtn,children:"Change Password"})}),Object(f.jsx)("div",{className:l.a.changeActionDiv,children:Object(f.jsx)(d.Link,{to:"/addAddress",className:l.a.emailActionBtn,children:"Add Address"})})]})]})]})]})})}}}]);
//# sourceMappingURL=22.0fbb72f3.chunk.js.map