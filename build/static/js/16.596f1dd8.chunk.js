(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[16],{114:function(e,a,t){e.exports={confirmEmailWrapper:"confirmEmail_confirmEmailWrapper__8uFW8",confirmEmaiContainer:"confirmEmail_confirmEmaiContainer__q58wR",titlePrimary:"confirmEmail_titlePrimary__2vDXZ",titleSecondary:"confirmEmail_titleSecondary__2MSbj",clarify:"confirmEmail_clarify__1foUe",clarifyEmail:"confirmEmail_clarifyEmail__1hklH",errorMessage:"confirmEmail_errorMessage__3Xm3b",errorMsgList:"confirmEmail_errorMsgList__ZsqzU",successMessage:"confirmEmail_successMessage__1O2Qa",successMsgList:"confirmEmail_successMsgList__3ywdR",badgeContainer:"confirmEmail_badgeContainer__1daDe",iconCheck:"confirmEmail_iconCheck__nBBxP"}},126:function(e,a,t){"use strict";t.r(a);var r=t(7),i=t(20),c=t(6),n=t(9),s=t(5),o=t(0),l=t(78),m=t(87),f=t(13),u=t(114),b=t.n(u),d=t(1);a.default=function(){var e=Object(o.useContext)(f.b),a=new URLSearchParams(window.location.search).get("oobCode"),t=Object(o.useState)([]),u=Object(s.a)(t,2),j=u[0],p=u[1],O=Object(o.useState)({}),h=Object(s.a)(O,2),_=h[0],E=h[1],x=Object(o.useState)(""),w=Object(s.a)(x,2),y=w[0],g=w[1],v=Object(o.useState)(""),N=Object(s.a)(v,2),S=N[0],k=N[1],C=Object(o.useState)(!1),V=Object(s.a)(C,2),M=V[0],D=V[1],P=Object(o.useState)(!1),T=Object(s.a)(P,2),L=T[0],U=T[1],J=Object(o.useState)(null),R=Object(s.a)(J,2),W=R[0],F=R[1],X=Object(o.useState)(null),Y=Object(s.a)(X,2),Z=Y[0],q=Y[1];Object(o.useEffect)((function(){var e=function(){var e=Object(n.a)(Object(c.a)().mark((function e(){var a,t,r,i;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://react-http-products-default-rtdb.firebaseio.com/users.json");case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Something went wrong!");case 5:return e.next=7,a.json();case 7:for(i in t=e.sent,r=[],t)r.push({id:i,email:t[i].email,firstName:t[i].firstName,lastName:t[i].lastName,password:t[i].password,emailVerified:t[i].emailVerified});p(r);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);return Object(o.useEffect)((function(){var t=function(){var a=Object(n.a)(Object(c.a)().mark((function a(t,r){var i,n;return Object(c.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch(t,{method:"POST",body:JSON.stringify({oobCode:r}),headers:{"Content-Type":"application/json"}});case 2:return(i=a.sent).ok||(U(!0),F("Email Verification Failed")),a.next=6,i.json();case 6:n=a.sent,k(n.email),n.emailVerified&&(D(n.emailVerified),e.isEmailVerfied(n.emailVerified,n.email),e.isOobCode(r),U(!1),q("Email Verified Successfully")),n.error&&(U(!0),F("Email Verification Failed"));case 10:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}();t("https://identitytoolkit.googleapis.com/v1/accounts:update?key=AIzaSyDNDXcfx6jpm5Y_121TikxsU7-Yx2ZrmeQ",a)}),[]),Object(o.useEffect)((function(){var e=function(){var e=Object(n.a)(Object(c.a)().mark((function e(a,t){var r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a.find((function(e){return e.email===t})),E(r),console.log("user",r),r&&g(r.id);case 4:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}();e(j,S);var a=j.filter((function(e){return e.email!==S})),t=function(){var e=Object(n.a)(Object(c.a)().mark((function e(t){var n,s;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://react-http-products-default-rtdb.firebaseio.com/users.json",{method:"PUT",body:JSON.stringify(Object(i.a)(Object(i.a)({},a),{},Object(r.a)({},t,{ID:_.id,firstName:_.firstName,lastName:_.lastName,email:_.email,password:_.password,emailVerified:M}))),headers:{"Content-Type":"application/json"}});case 2:if(n=e.sent,console.log("Respone from updateEmailVerified",n),n.ok){e.next=6;break}throw new Error("Something went wrong!");case 6:return e.next=8,n.json();case 8:s=e.sent,console.log("Data from updateEmailVerified",s);case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();t(y)}),[S,j,_,y,M]),console.log("users",j),Object(d.jsxs)("div",{className:b.a.confirmEmailWrapper,children:[!L&&Object(d.jsxs)("div",{className:b.a.confirmEmaiContainer,children:[Object(d.jsx)("div",{className:b.a.badgeContainer,children:Object(d.jsx)(l.a,{icon:m.a,className:b.a.iconCheck})}),Object(d.jsx)("h1",{className:b.a.titleSecondary,children:Z}),Object(d.jsxs)("p",{className:b.a.clarifyEmail,children:["for ",e.email," "]}),Object(d.jsxs)("p",{className:b.a.clarify,children:["You can now sign in with your new account",Object(d.jsx)("br",{})]})]}),L&&Object(d.jsxs)("div",{className:b.a.confirmEmaiContainer,children:[Object(d.jsx)("div",{className:b.a.badgeContainer,children:Object(d.jsx)(l.a,{icon:m.b,className:b.a.iconCheck})}),Object(d.jsx)("h1",{className:b.a.titleSecondary,children:W}),Object(d.jsxs)("p",{className:b.a.clarify,children:["Try Again or Contact Support!",Object(d.jsx)("br",{})]})]})]})}}}]);
//# sourceMappingURL=16.596f1dd8.chunk.js.map