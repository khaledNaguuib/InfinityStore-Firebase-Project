{"version":3,"sources":["Components/UI/Modal.js","Components/Cart/CartItem.js","../node_modules/@stripe/stripe-js/dist/stripe.esm.js","Components/Cart/Cart.js","Components/UI/Modal.module.css","Components/Cart/Cart.module.css","Components/Cart/CartItem.module.css"],"names":["Backdrop","props","className","styles","backdrop","onClick","onClose","ModalOverlay","modal","content","children","document","getElementById","overlay","Modal","ReactDOM","createPortal","CartItem","name","summary","price","amount","actions","onRemove","onAdd","V3_URL","V3_URL_REGEX","EXISTING_SCRIPT_MESSAGE","stripePromise","loadScript","params","Promise","resolve","reject","window","Stripe","console","warn","script","scripts","querySelectorAll","concat","i","length","test","src","findScript","queryString","advancedFraudSignals","createElement","headOrBody","head","body","Error","appendChild","injectScript","addEventListener","error","initStripe","maybeStripe","args","startTime","stripe","apply","undefined","_registerWrapper","version","registerWrapper","stripePromise$1","then","loadCalled","err","getStripe","_len","arguments","Array","_key","Date","now","loadStripe","process","Cart","cartCtx","useContext","CartContext","items","ctxItems","key","push","stripePrice","quantity","log","checkoutOptions","lineItems","mode","successUrl","location","origin","cancelUrl","redirectToCheckout","useState","isCheckout","isSubmitting","didSubmit","totalAmount","toFixed","hasItems","cartRemoveHandler","id","removeItem","cartAddHandler","item","addItem","cartItems","map","bind","modalActions","button","cartModalContent","flex","total","isSubmittingModalContent","orderSubmitting","didSubmitModalContent","orderSubmited","module","exports"],"mappings":"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","file":"static/js/10.21201aeb.chunk.js","sourcesContent":["import ReactDOM from \"react-dom\";\nimport styles from \"./Modal.module.css\";\n\nconst Backdrop = (props) => {\n  return <div className={styles.backdrop} onClick={props.onClose} />;\n};\n\nconst ModalOverlay = (props) => {\n  return (\n    <div className={styles.modal}>\n      <div className={styles.content}>{props.children}</div>\n    </div>\n  );\n};\n\n// For Portal containers\nconst backdrop = document.getElementById(\"backdrop-root\");\nconst overlay = document.getElementById(\"overlay-root\");\n\nconst Modal = (props) => {\n  return (\n    <>\n      {ReactDOM.createPortal(<Backdrop onClose={props.onClose} />, backdrop)}\n      {ReactDOM.createPortal(\n        <ModalOverlay>{props.children}</ModalOverlay>,\n        overlay\n      )}\n    </>\n  );\n};\n\n\n\nexport default Modal;\n","import styles from \"./CartItem.module.css\";\nconst CartItem = (props) => {\n  // const price = `$${props.price.toFixed(2)}`;\n\n  return (\n    <li className={styles[\"cart-item\"]}>\n      <div>\n        <h2>{props.name}</h2>\n        <div className={styles.summary}>\n          <span className={styles.price}>{props.price}</span>\n          <span className={styles.amount}>x {props.amount}</span>\n        </div>\n      </div>\n      <div className={styles.actions}>\n        <button onClick={props.onRemove}>âˆ’</button>\n        <button onClick={props.onAdd}>+</button>\n      </div>\n    </li>\n  );\n};\n\nexport default CartItem;\n","var V3_URL = 'https://js.stripe.com/v3';\nvar V3_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/v3\\/?(\\?.*)?$/;\nvar EXISTING_SCRIPT_MESSAGE = 'loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used';\nvar findScript = function findScript() {\n  var scripts = document.querySelectorAll(\"script[src^=\\\"\".concat(V3_URL, \"\\\"]\"));\n\n  for (var i = 0; i < scripts.length; i++) {\n    var script = scripts[i];\n\n    if (!V3_URL_REGEX.test(script.src)) {\n      continue;\n    }\n\n    return script;\n  }\n\n  return null;\n};\n\nvar injectScript = function injectScript(params) {\n  var queryString = params && !params.advancedFraudSignals ? '?advancedFraudSignals=false' : '';\n  var script = document.createElement('script');\n  script.src = \"\".concat(V3_URL).concat(queryString);\n  var headOrBody = document.head || document.body;\n\n  if (!headOrBody) {\n    throw new Error('Expected document.body not to be null. Stripe.js requires a <body> element.');\n  }\n\n  headOrBody.appendChild(script);\n  return script;\n};\n\nvar registerWrapper = function registerWrapper(stripe, startTime) {\n  if (!stripe || !stripe._registerWrapper) {\n    return;\n  }\n\n  stripe._registerWrapper({\n    name: 'stripe-js',\n    version: \"1.46.0\",\n    startTime: startTime\n  });\n};\n\nvar stripePromise = null;\nvar loadScript = function loadScript(params) {\n  // Ensure that we only attempt to load Stripe.js at most once\n  if (stripePromise !== null) {\n    return stripePromise;\n  }\n\n  stripePromise = new Promise(function (resolve, reject) {\n    if (typeof window === 'undefined') {\n      // Resolve to null when imported server side. This makes the module\n      // safe to import in an isomorphic code base.\n      resolve(null);\n      return;\n    }\n\n    if (window.Stripe && params) {\n      console.warn(EXISTING_SCRIPT_MESSAGE);\n    }\n\n    if (window.Stripe) {\n      resolve(window.Stripe);\n      return;\n    }\n\n    try {\n      var script = findScript();\n\n      if (script && params) {\n        console.warn(EXISTING_SCRIPT_MESSAGE);\n      } else if (!script) {\n        script = injectScript(params);\n      }\n\n      script.addEventListener('load', function () {\n        if (window.Stripe) {\n          resolve(window.Stripe);\n        } else {\n          reject(new Error('Stripe.js not available'));\n        }\n      });\n      script.addEventListener('error', function () {\n        reject(new Error('Failed to load Stripe.js'));\n      });\n    } catch (error) {\n      reject(error);\n      return;\n    }\n  });\n  return stripePromise;\n};\nvar initStripe = function initStripe(maybeStripe, args, startTime) {\n  if (maybeStripe === null) {\n    return null;\n  }\n\n  var stripe = maybeStripe.apply(undefined, args);\n  registerWrapper(stripe, startTime);\n  return stripe;\n}; // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\n// own script injection.\n\nvar stripePromise$1 = Promise.resolve().then(function () {\n  return loadScript(null);\n});\nvar loadCalled = false;\nstripePromise$1[\"catch\"](function (err) {\n  if (!loadCalled) {\n    console.warn(err);\n  }\n});\nvar loadStripe = function loadStripe() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  loadCalled = true;\n  var startTime = Date.now();\n  return stripePromise$1.then(function (maybeStripe) {\n    return initStripe(maybeStripe, args, startTime);\n  });\n};\n\nexport { loadStripe };\n","import React, { useState, Fragment, useContext } from \"react\";\nimport CartContext from \"../Store/Cart-Context\";\nimport Modal from \"../UI/Modal\";\nimport styles from \"./Cart.module.css\";\nimport CartItem from \"./CartItem\";\nimport { loadStripe } from \"@stripe/stripe-js\";\n\n// Here we are loading the stripe script in the browser and then we are storing it in the stripePromise variable.\n// This is a promise that will resolve to the stripe object.\nlet stripePromise;\nconst getStripe = () => {\n  // if stripePromise is not defined then we will load the stripe script in the browser.\n  // we call this function right before you redirect the user to the checkout page.\n  if (!stripePromise) {\n    stripePromise = loadStripe(process.env.REACT_APP_STRIPE_KEY); // => we need to pass the publishable key here.\n  }\n\n  return stripePromise;\n};\n\nconst Cart = (props) => {\n  const cartCtx = useContext(CartContext);\n\n  let items = [];\n  let ctxItems = cartCtx.items;\n\n  for (const key in ctxItems) {\n    items.push({\n      price: ctxItems[key].stripePrice,\n      quantity: +ctxItems[key].amount,\n    });\n  }\n  console.log(\"cartCtxItems in Cart component\", cartCtx);\n  console.log(\"itemsss\", items);\n\n  const checkoutOptions = {\n    lineItems: items,\n    mode: \"payment\",\n    successUrl: `${window.location.origin}/success`,\n    cancelUrl: `${window.location.origin}/cancel`,\n  };\n\n  const redirectToCheckout = async () => {\n    console.log(\"redirect to checkout\");\n\n    const stripe = await getStripe();\n    const { error } = await stripe.redirectToCheckout(checkoutOptions);\n    console.log(error);\n  };\n\n  const [isCheckout, setIsCheckout] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [didSubmit, setDidSubmit] = useState(false);\n  const totalAmount = `$${cartCtx.totalAmount.toFixed(2)}`;\n  // wanna check if there are items in cart or not => to show order butoon or not.\n  const hasItems = cartCtx.items.length > 0;\n\n  const cartRemoveHandler = (id) => {\n    cartCtx.removeItem(id);\n  };\n\n  const cartAddHandler = (item) => {\n    cartCtx.addItem({ ...item, amount: 1 });\n  };\n\n  const cartItems = (\n    <ul className={styles[\"cart-items\"]}>\n      {cartCtx.items.map((item) => (\n        <CartItem\n          key={item.id}\n          name={item.name}\n          amount={item.amount}\n          price={item.price}\n          onRemove={cartRemoveHandler.bind(null, item.id)}\n          onAdd={cartAddHandler.bind(null, item)}\n        />\n      ))}\n    </ul>\n  );\n\n  // const orderHandler = () => {\n  //   setIsCheckout(true);\n  // };\n\n  // const submitOrderHandler = async (userData) => {\n  //   setIsSubmitting(true);\n  //   const response = await fetch(\n  //     \"https://react-http-products-default-rtdb.firebaseio.com/orders.json\",\n  //     {\n  //       method: \"POST\",\n  //       body: JSON.stringify({\n  //         user: userData,\n  //         orderedItems: cartCtx.items,\n  //       }),\n  //     }\n  //   );\n  //   setIsSubmitting(false);\n  //   setDidSubmit(true);\n  //   cartCtx.clearCart();\n  // };\n\n  const modalActions = (\n    <div className={styles.actions}>\n      <button className={styles[\"button--alt\"]} onClick={props.onClose}>\n        Close\n      </button>\n      {/* {hasItems && (\n        <button className={styles.button} onClick={orderHandler}>\n          Checkout\n        </button>\n      )} */}\n      {hasItems && (\n        <button className={styles.button} onClick={redirectToCheckout}>\n          Checkout\n        </button>\n      )}\n    </div>\n  );\n\n  const cartModalContent = (\n    <Fragment>\n      {cartItems}\n      <div className={styles.flex}>\n        <div className={styles.total}>\n          <span>Total Amount</span>\n          <span>{totalAmount}</span>\n        </div>\n\n        {/* {isCheckout && (\n          <Checkout onConfirm={submitOrderHandler} onCancel={props.onClose} />\n        )} */}\n        {!isCheckout && modalActions}\n      </div>\n    </Fragment>\n  );\n\n  const isSubmittingModalContent = (\n    <p className={styles.orderSubmitting}>Sending order data...</p>\n  );\n  const didSubmitModalContent = (\n    <p className={styles.orderSubmited}>\n      Order sent successfully. we will be in touch with as you soon as your\n      shipment is ready to be shipped.{\" \"}\n    </p>\n  );\n  return (\n    <Modal onClose={props.onClose}>\n      {!isSubmitting && !didSubmit && cartModalContent}\n      {isSubmitting && isSubmittingModalContent}\n      {!isSubmitting && didSubmit && didSubmitModalContent}\n    </Modal>\n  );\n};\n\nexport default Cart;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backdrop\":\"Modal_backdrop__2znzX\",\"modal\":\"Modal_modal__2QgxK\",\"slide-down\":\"Modal_slide-down__Y0TjC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cart-items\":\"Cart_cart-items__vzHa0\",\"total\":\"Cart_total__2eGro\",\"actions\":\"Cart_actions__1WjU2\",\"button--alt\":\"Cart_button--alt__2HE6d\",\"button\":\"Cart_button__UFFpv\",\"orderSubmitting\":\"Cart_orderSubmitting__3y6Nb\",\"orderSubmited\":\"Cart_orderSubmited__3SzKz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cart-item\":\"CartItem_cart-item__3MY83\",\"summary\":\"CartItem_summary__xPm89\",\"price\":\"CartItem_price__29Nnm\",\"amount\":\"CartItem_amount__30Txm\",\"actions\":\"CartItem_actions__2E3m3\"};"],"sourceRoot":""}