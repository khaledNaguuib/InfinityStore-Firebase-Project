{"version":3,"sources":["Profile/changeEmail.module.css","Profile/ChangeEmail.js"],"names":["module","exports","ChangeEmail","navigate","useNavigate","authCtx","useContext","authContext","userToken","token","console","log","useState","isThereError","setIsThereError","errorMessage","setErrorMessage","isSuccess","setIsSuccess","successMessage","setSuccessMessage","emailInputRef1","useRef","emailInputRef2","changeEmail","apiURL","newEmail","fetch","method","body","JSON","stringify","idToken","email","returnSecureToken","headers","response","ok","Error","statusText","json","data","updateEmail","error","message","onSubmitHanlder","event","preventDefault","enteredEmail1","current","value","enteredEmail2","logout","setTimeout","className","styles","changeEmailContainer","changeEmailTitle","onSubmit","formControl","inputLabel","htmlFor","inputField","type","id","ref","errorMsgList","successMsgList","btnSubmit"],"mappings":"wHACAA,EAAOC,QAAU,CAAC,qBAAuB,0CAA0C,iBAAmB,sCAAsC,YAAc,iCAAiC,WAAa,gCAAgC,WAAa,gCAAgC,UAAY,+BAA+B,aAAe,kCAAkC,aAAe,kCAAkC,eAAiB,oCAAoC,eAAiB,oC,kHC0JzdC,UAtJf,WACE,IAAMC,EAAWC,cAEXC,EAAUC,qBAAWC,KACrBC,EAAYH,EAAQI,MAC1BC,QAAQC,IAAI,YAAaH,GAGzB,MAAwCI,oBAAS,GAAM,mBAAhDC,EAAY,KAAEC,EAAe,KACpC,EAAwCF,mBAAS,IAAG,mBAA7CG,EAAY,KAAEC,EAAe,KACpC,EAAkCJ,oBAAS,GAAM,mBAA1CK,EAAS,KAAEC,EAAY,KAC9B,EAA4CN,mBAAS,IAAG,mBAAjDO,EAAc,KAAEC,EAAiB,KAIlCC,EAAiBC,mBACjBC,EAAiBD,mBAOjBE,EAAW,iDAAG,WAAOC,EAAQC,GAAQ,4GAEhBC,MAAMF,EAAQ,CACnCG,OAAQ,OACRC,KAAMC,KAAKC,UAAU,CACnBC,QAASxB,EACTyB,MAAOP,EACPQ,mBAAmB,IAErBC,QAAS,CACP,eAAgB,sBAEjB,KAAD,EACgD,GAX5CC,EAAQ,OAWd1B,QAAQC,IAAI,2BAA4ByB,GACnCA,EAASC,GAAG,CAAD,qBACR,IAAIC,MAAMF,EAASG,YAAY,KAAD,kBAEnBH,EAASI,OAAO,KAAD,EAA5BC,EAAI,OACV/B,QAAQC,IAAI,OAAQ8B,GAChBA,GACF3B,GAAgB,GAChBI,GAAa,GACbE,EAAkB,8BAClBf,EAAQqC,YAAYhB,IACXe,EAAKE,QACdjC,QAAQC,IAAI,cAAe8B,EAAKE,OAChC7B,GAAgB,GAChBI,GAAa,GACbF,EAAgByB,EAAKE,MAAMC,UAC5B,kDAED9B,GAAgB,GAChBI,GAAa,GACbF,EAAgB,KAAM4B,SAAS,0DAElC,gBAnCgB,wCAsCXC,EAAe,iDAAG,WAAOC,GAAK,mFASlC,GARAA,EAAMC,iBAGAC,EAAgB3B,EAAe4B,QAAQC,MACvCC,EAAgB5B,EAAe0B,QAAQC,MAC7CxC,QAAQC,IAAIqC,GACZtC,QAAQC,IAAIwC,GAGRH,IAAkBG,EAAa,iBAGM,OAFvCrC,GAAgB,GAChBI,GAAa,GACbF,EAAgB,uBAAuB,2BAKrCR,GAAWgB,EA3Df,yGA2D8CwB,GAG9C3B,EAAe4B,QAAQC,MAAQ,GAC/B3B,EAAe0B,QAAQC,MAAQ,GAG/B7C,EAAQ+C,SACRC,YAAW,WACTlD,EAAS,SACX,GAAG,KAAM,4CACV,gBA7BoB,sCAqCrB,OANAO,QAAQC,IAAI,iBAAkBE,GAC9BH,QAAQC,IAAI,aAAcM,GAC1BP,QAAQC,IAAI,gBAAiBI,GAC7BL,QAAQC,IAAI,kBAAmBQ,GAC/BT,QAAQC,IAAIH,GAGV,mCACE,sBAAK8C,UAAWC,IAAOC,qBAAqB,UAC1C,oBAAIF,UAAWC,IAAOE,iBAAiB,0BAEvC,uBAAMC,SAAUb,EAAgB,UAC9B,sBAAKS,UAAWC,IAAOI,YAAY,UACjC,uBAAOL,UAAWC,IAAOK,WAAYC,QAAQ,SAAQ,uBAGrD,uBACEP,UAAWC,IAAOO,WAClBC,KAAK,QACLC,GAAG,SACHC,IAAK5C,OAGT,sBAAKiC,UAAWC,IAAOI,YAAY,UACjC,uBAAOL,UAAWC,IAAOK,WAAYC,QAAQ,SAAQ,+BAGrD,uBACEP,UAAWC,IAAOO,WAClBC,KAAK,QACLC,GAAG,SACHC,IAAK1C,OAKRV,GACC,qBAAKyC,UAAWC,IAAOxC,aAAa,SAClC,oBAAIuC,UAAWC,IAAOW,aAAa,SACjC,mCAAMnD,EAAY,WAIvBE,GACC,qBAAKqC,UAAWC,IAAOpC,eAAe,SACpC,oBAAImC,UAAWC,IAAOY,eAAe,SACnC,mCAAMhD,EAAc,WAK1B,wBAAQmC,UAAWC,IAAOa,UAAU,2BAK9C,C","file":"static/js/16.4aa4ad35.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"changeEmailContainer\":\"changeEmail_changeEmailContainer__2E5ls\",\"changeEmailTitle\":\"changeEmail_changeEmailTitle__2nE1c\",\"formControl\":\"changeEmail_formControl__n0Dnp\",\"inputLabel\":\"changeEmail_inputLabel__H1_o7\",\"inputField\":\"changeEmail_inputField__3JsQo\",\"btnSubmit\":\"changeEmail_btnSubmit__2-OSQ\",\"errorMessage\":\"changeEmail_errorMessage__ENtDg\",\"errorMsgList\":\"changeEmail_errorMsgList__ZIXVr\",\"successMessage\":\"changeEmail_successMessage__39DHI\",\"successMsgList\":\"changeEmail_successMsgList__q4r8h\"};","import React, { useRef, useState, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport styles from \"./changeEmail.module.css\";\nimport authContext from \"../Components/Store/Auth-Context\";\n\nfunction ChangeEmail() {\n  const navigate = useNavigate();\n  // Auth Context\n  const authCtx = useContext(authContext);\n  const userToken = authCtx.token;\n  console.log(\"userToken\", userToken);\n\n  // Handling feedbacks\n  const [isThereError, setIsThereError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [isSuccess, setIsSuccess] = useState(false);\n  const [successMessage, setSuccessMessage] = useState(\"\");\n  // New Email Value\n\n  // Getting the input values\n  const emailInputRef1 = useRef();\n  const emailInputRef2 = useRef();\n\n  // use useEffect hook to change the Email\n  const changeEmailApiURL =\n    \" https://identitytoolkit.googleapis.com/v1/accounts:update?key=AIzaSyDNDXcfx6jpm5Y_121TikxsU7-Yx2ZrmeQ\";\n\n  // Function to change the email\n  const changeEmail = async (apiURL, newEmail) => {\n    try {\n      const response = await fetch(apiURL, {\n        method: \"POST\",\n        body: JSON.stringify({\n          idToken: userToken,\n          email: newEmail,\n          returnSecureToken: true,\n        }),\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      });\n      console.log(\"response to change Email\", response);\n      if (!response.ok) {\n        throw new Error(response.statusText);\n      }\n      const data = await response.json();\n      console.log(\"data\", data);\n      if (data) {\n        setIsThereError(false);\n        setIsSuccess(true);\n        setSuccessMessage(\"Email Changed Successfully\");\n        authCtx.updateEmail(newEmail);\n      } else if (data.error) {\n        console.log(\"data Error \", data.error);\n        setIsThereError(true);\n        setIsSuccess(false);\n        setErrorMessage(data.error.message);\n      }\n    } catch (error) {\n      setIsThereError(true);\n      setIsSuccess(false);\n      setErrorMessage(error.message);\n    }\n  };\n\n  // Handling the form submission\n  const onSubmitHanlder = async (event) => {\n    event.preventDefault();\n\n    // Getting the input values\n    const enteredEmail1 = emailInputRef1.current.value;\n    const enteredEmail2 = emailInputRef2.current.value;\n    console.log(enteredEmail1);\n    console.log(enteredEmail2);\n\n    // Checking if the email is valid\n    if (enteredEmail1 !== enteredEmail2) {\n      setIsThereError(true);\n      setIsSuccess(false);\n      setErrorMessage(\"Emails do not match\");\n      return;\n    }\n\n    // Calling the change email function\n    if (userToken) changeEmail(changeEmailApiURL, enteredEmail1);\n\n    // Resetting the form\n    emailInputRef1.current.value = \"\";\n    emailInputRef2.current.value = \"\";\n\n    // Logging the user out and navigate to login page\n    authCtx.logout();\n    setTimeout(() => {\n      navigate(\"/login\");\n    }, 2000);\n  };\n\n  console.log(\"is There error\", isThereError);\n  console.log(\"is Success\", isSuccess);\n  console.log(\"error message\", errorMessage);\n  console.log(\"success message\", successMessage);\n  console.log(userToken);\n\n  return (\n    <>\n      <div className={styles.changeEmailContainer}>\n        <h1 className={styles.changeEmailTitle}>Change Email</h1>\n\n        <form onSubmit={onSubmitHanlder}>\n          <div className={styles.formControl}>\n            <label className={styles.inputLabel} htmlFor=\"email1\">\n              New Email\n            </label>\n            <input\n              className={styles.inputField}\n              type=\"email\"\n              id=\"email1\"\n              ref={emailInputRef1}\n            />\n          </div>\n          <div className={styles.formControl}>\n            <label className={styles.inputLabel} htmlFor=\"email2\">\n              Confirm New Email\n            </label>\n            <input\n              className={styles.inputField}\n              type=\"email\"\n              id=\"email2\"\n              ref={emailInputRef2}\n            />\n          </div>\n\n          {/* HANDLING FEEDBACKS */}\n          {isThereError && (\n            <div className={styles.errorMessage}>\n              <ul className={styles.errorMsgList}>\n                <li> {errorMessage} </li>\n              </ul>\n            </div>\n          )}\n          {isSuccess && (\n            <div className={styles.successMessage}>\n              <ul className={styles.successMsgList}>\n                <li> {successMessage} </li>\n              </ul>\n            </div>\n          )}\n\n          <button className={styles.btnSubmit}>Submit</button>\n        </form>\n      </div>\n    </>\n  );\n}\n\nexport default ChangeEmail;\n"],"sourceRoot":""}